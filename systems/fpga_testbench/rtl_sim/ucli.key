# -----------------------------------------------------------------------------
# The confidential and proprietary information contained in this file may
# only be used by a person authorised under and to the extent permitted
# by a subsisting licensing agreement from ARM Limited.
#
#            (C) COPYRIGHT 2010-2015 ARM Limited.
#                ALL RIGHTS RESERVED
#
# This entire notice must be reproduced on all copies of this file
# and copies of this file may only be made by a person if such person is
# permitted to do so under the terms of a subsisting license agreement
# from ARM Limited.
#
#      SVN Information
#
#      Checked In          : $Date: 2017-08-11 14:44:16 +0100 (Fri, 11 Aug 2017) $
#
#      Revision            : $Revision: 369125 $
#
#      Release Information : 
# -----------------------------------------------------------------------------
#
# Setup script for VCS
# This script has 3 main functions.
# 1.  Force address bus to 0, run for 1us, release address bus.  This removes warnings
#     from the memories regarding X indexing their arrays.
# 2.  Preload the SSRAM1 bank with the code from the generated hex files
# 3.  Force the zbt_boot_ctrl to be active so that the code is run from the 
#     preloaded SSRAM1 bank above
#
# -----------------------------------------------------------------------------
#
# At the start of simulation, due to the memory bus being X, most memories
# issue a warning.  To clean this up, force the bus to 0, run the sim for 1us
# so that the reset has seen a clock cycle, then remove the force and allow
# the simulation to run normally.
# Path list of all the memory indicies that are unknown at the start of simulation
set addr_list [list \
  tb_fpga/u_fpga_top/u_fpga_system/u_user_partition/u_cmsdk_mcu_system/cm0_haddr \
  tb_fpga/u_fpga_top/u_fpga_system/u_user_partition/u_ahb_blockram_32/reg_haddr \
  tb_fpga/uSSRAM1A/raddr \
  tb_fpga/uSSRAM1B/raddr \
  tb_fpga/uSSRAM2/raddr \
  tb_fpga/uSSRAM3/raddr \
  tb_fpga/u_fpga_top/u_fpga_system/u_user_partition/u_ahbvga/u_vga_console/u_video_ram/addr_a_reg \
  tb_fpga/u_fpga_top/u_fpga_system/u_user_partition/u_ahbvga/u_vga_console/u_video_ram/addr_b_reg \
  tb_fpga/u_fpga_top/u_fpga_system/u_user_partition/u_ahbvga/u_vga_image/u_image_ram/addr_a_reg \
  tb_fpga/u_fpga_top/u_fpga_system/u_user_partition/u_ahbvga/u_vga_image/u_image_ram/addr_b_reg \
]
# Tie them all inactive, run the simulation for a few clock cycles
# then release
foreach addr $addr_list { force $addr 0 }
